# 01. Пользователи, Проекты и Безопасность

## 1. Модель Пользователей и Тенантов
*   **Organization:** Корневая сущность (изоляция данных клиентов/спонсоров).
*   **Roles:** `Org Admin`, `Project Owner`, `Writer`, `Viewer`.
*   **Service Accounts:** Специальная роль для AI-микросервиса, чтобы он мог читать/писать в БД в обход RLS пользователя (или через signed tokens).

## 2. Проекты (Projects/Studies)
*   **Поля:** `study_code`, `title`, `sponsor` (text), `therapeutic_area` (text), `status` (`draft`, `active`, `archived`).
*   **Связи:** Проект привязан к организации (`organization_id`) и имеет создателя (`created_by`).
*   **Участники:** Управление через таблицу `project_members` с ролями (`project_owner`, `editor`, `viewer`).

## 3. Интеграция с AI Engine
*   При создании проекта автоматически создается задача в Python-сервисе на инициализацию "Паспорта исследования" (пустой шаблон).

## 4. UI Требования
*   **Dashboard:** Список проектов с индикацией статуса обработки документов.
*   **Project Page:** Страница проекта с вкладками:
    *   **Обзор** - общая информация о проекте
    *   **Документы** - список создаваемых документов (deliverables) с возможностью создания новых через модальное окно
    *   **Источники** - список исходных документов (source_documents) с возможностью загрузки через модальное окно
    *   **QC** - проблемы контроля качества
    *   **Настройки** - настройки проекта
*   **Модальные окна:**
    *   `CreateDeliverableModal` - создание нового документа на основе шаблона (custom_template)
    *   `UploadSourceModal` - загрузка исходного документа (Protocol, SAP и т.д.) с выбором типа документа и опционального шаблона для классификации
*   **Project Settings:** Настройка маппинга (выбор шаблона: "Oncology Template", "Generic Template").